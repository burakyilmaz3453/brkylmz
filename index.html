<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Burak Yılmaz | Dijital Kart</title>
<meta name="theme-color" content="#0b0f10">
<style>
  :root{
    --bg:#0b0f10; --panel:#0f1418; --text:#e9eef2; --muted:#b7c2ca;
    --radius:20px; --shadow:0 20px 60px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
    display:grid; place-items:start center;
  }

  .card{
    width:min(720px, 92vw);
    margin:0 auto;
    background:#0b1014; border-radius:var(--radius);
    overflow:hidden; box-shadow:var(--shadow);
    position:sticky; top:0; z-index:5;
  }

  .cover{
    height:clamp(140px, 32vw, 180px);
    background:#111 url("banner.jpg") center/cover no-repeat;
    position:relative;
  }
  .avatar{
    position:absolute; left:50%; bottom:-56px; transform:translateX(-50%);
    width:112px; height:112px; border-radius:50%;
    background:#fff url("brkylmz.jpg") center/cover no-repeat;
    box-shadow:0 0 0 4px #ffffff, 0 8px 24px rgba(0,0,0,.45);
    outline:6px solid #0f1418;
    cursor:zoom-in;
  }

  .inner{ background:var(--panel); padding:72px 22px 22px; text-align:center }
  .name{ margin:0 0 6px; font-weight:800; font-size:clamp(22px,5vw,28px) }
  .company{ color:var(--muted); font-size:14px }
  .title{ color:var(--muted); font-size:13px; margin-top:4px }

  .actions{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:12px; margin-top:22px }
  .btn{
    display:flex; flex-direction:column; align-items:center; gap:8px;
    background:#11171c; border:1px solid rgba(255,255,255,.06);
    border-radius:14px; padding:14px 10px; color:var(--text); text-decoration:none;
  }
  .btn svg{ width:20px; height:20px; opacity:.9 }
  .btn span{ font-size:12px; color:#d2dde6 }
  .btn:active{ transform:translateY(1px) }

  /* Modal */
  .modal{ position:fixed; inset:0; display:none; place-items:center; z-index:50 }
  .modal.open{ display:grid }
  .modal .overlay{ position:absolute; inset:0; background:rgba(0,0,0,.65) }
  .modal .box{ position:relative; z-index:1; background:#0f1418; padding:10px; border-radius:16px }
  .modal img{ display:block; max-width:min(92vw, 480px); height:auto; border-radius:16px }
  .modal .close{
    position:absolute; top:-10px; right:-10px; width:36px; height:36px; border-radius:50%;
    border:0; cursor:pointer; background:#fff; color:#000; font-weight:700;
  }

  /* ===== Alt iletişim paneli ===== */
  .contact-panel{
    width:min(720px,92vw); margin:18px auto 60px;
    background:#11171c; border:1px solid rgba(255,255,255,.06);
    border-radius:16px; box-shadow:0 14px 40px rgba(0,0,0,.35);
  }
  .contact-grip{ display:flex; justify-content:center; padding:8px 0 4px }
  .contact-grip span{ width:58px; height:4px; border-radius:999px; background:rgba(255,255,255,.18) }

  .contact-list{ list-style:none; margin:8px; padding:0 }
  .contact-row{
    display:flex; align-items:center; justify-content:space-between;
    gap:10px; padding:12px; margin:8px 4px; border-radius:12px;
    background:#0f1418; border:1px solid rgba(255,255,255,.05);
  }
  .contact-left{ display:flex; align-items:center; gap:10px; min-width:0 }
  .contact-left svg{ width:18px; height:18px; opacity:.9; flex:0 0 auto }
  .contact-text{ color:#e9eef2; text-decoration:none; word-break:break-word }
  .copy-btn{
    display:inline-flex; align-items:center; justify-content:center;
    width:34px; height:34px; border-radius:10px; cursor:pointer;
    background:#0b1014; border:1px solid rgba(255,255,255,.12); color:#e9eef2;
  }
  .copy-btn:active{ transform:translateY(1px) }
  .copy-btn svg{ width:16px; height:16px }
</style>
</head>
<body>

<!-- ==== ÜST KART ==== -->
<section class="card" aria-label="Dijital Kart">
  <div class="cover">
    <div class="avatar" id="avatar" aria-label="Avatar"></div>
  </div>
  <div class="inner">
    <h1 class="name">Burak Yılmaz</h1>
    <div class="company">Osmanlı Menkul Değerler A.Ş.</div>
    <div class="title">System Administrator</div>
    <nav class="actions" aria-label="Hızlı İşlemler">
      <a class="btn" href="tel:+905524915334"><span>Call</span></a>
      <a class="btn" href="mailto:buraky@osmanlimenkul.com.tr"><span>E-mail</span></a>
      <a class="btn" href="./qr.svg" target="_blank" rel="noopener"><span>QR</span></a>
      <a class="btn save"
         href="https://raw.githubusercontent.com/burakyilmaz3453/brkylmz/main/BurakYilmazCard.vcf"
         type="text/vcard"><span>Save</span></a>
    </nav>
  </div>
</section>

<!-- ==== ALT İLETİŞİM PANELİ ==== -->
<section class="contact-panel" aria-label="İletişim">
  <div class="contact-grip"><span></span></div>
  <ul class="contact-list">
    <li class="contact-row" id="rowCell">
      <div class="contact-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17 2H7a2 2 0 00-2 2v16a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2zm-5 19a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"/></svg>
        <a id="cellLink" class="contact-text" href="#">—</a>
      </div>
      <button class="copy-btn" id="copyCell">⧉</button>
    </li>
    <li class="contact-row" id="rowWork">
      <div class="contact-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24 11.36 11.36 0 003.56.57 1 1 0 011 1V20a1 1 0 01-1 1A17 17 0 013 5a1 1 0 011-1h3.5a1 1 0 011 1 11.36 11.36 0 00.57 3.56 1 1 0 01-.24 1.01l-2.2 2.2z"/></svg>
        <a id="workLink" class="contact-text" href="#">—</a>
      </div>
      <button class="copy-btn" id="copyWork">⧉</button>
    </li>
    <li class="contact-row" id="rowMail">
      <div class="contact-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm-1.4 3L12 11.25 5.4 7h13.2z"/></svg>
        <a id="mailLink" class="contact-text" href="#">—</a>
      </div>
      <button class="copy-btn" id="copyMail">⧉</button>
    </li>
    <li class="contact-row" id="rowWeb">
      <div class="contact-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 5h5v2h-3v8h-2V7zM7 9h4v2H9v6H7V9z"/></svg>
        <a id="webLink" class="contact-text" href="#">—</a>
      </div>
      <button class="copy-btn" id="copyWeb">⧉</button>
    </li>
  </ul>
</section>

<!-- Avatar Modal -->
<div class="modal" id="avModal"><div class="overlay"></div><div class="box"><button class="close">×</button><img id="avBig"></div></div>

<script>
// Avatar büyütme
const av=document.getElementById('avatar'),modal=document.getElementById('avModal'),big=document.getElementById('avBig');
const bg=getComputedStyle(av).backgroundImage,src=bg.slice(bg.indexOf('"')+1,bg.lastIndexOf('"')); big.src=src;
av.addEventListener('click',()=>modal.classList.add('open'));
modal.querySelector('.overlay').addEventListener('click',()=>modal.classList.remove('open'));
modal.querySelector('.close').addEventListener('click',()=>modal.classList.remove('open'));

// VCF'den bilgileri doldur
(async ()=>{
  const saveA=document.querySelector('.btn.save'); let vcfUrl=saveA?saveA.getAttribute('href'):'./BurakYilmazCard.vcf';
  try{
    const res=await fetch(vcfUrl,{cache:'no-store'}); if(!res.ok) throw 0;
    const text=await res.text(); fillFromVCF(text);
  }catch(e){console.warn('VCF okunamadı');}

  function unfold(s){return s.replace(/\r?\n[ \t]/g,'');}
  function telHref(v){return 'tel:'+v.replace(/[^+\d]/g,'');}
  function mailHref(v){return 'mailto:'+v;}
  function urlNorm(v){return v.startsWith('http')?v:'https://'+v;}

  function fillFromVCF(raw){
    const lines=unfold(raw).split(/\r?\n/); const d={};
    for(const l of lines){
      if(l.startsWith('TEL;TYPE=CELL')) d.cell=l.split(':')[1];
      if(l.startsWith('TEL;TYPE=WORK')) d.work=l.split(':')[1];
      if(l.startsWith('EMAIL')) d.email=l.split(':')[1];
      if(l.startsWith('URL')) d.url=l.split(':')[1];
    }
    if(d.cell){cellLink.textContent=d.cell; cellLink.href=telHref(d.cell); copyCell.dataset.copy=d.cell;}
    else rowCell.style.display='none';
    if(d.work){workLink.textContent=d.work; workLink.href=telHref(d.work); copyWork.dataset.copy=d.work;}
    else rowWork.style.display='none';
    if(d.email){mailLink.textContent=d.email; mailLink.href=mailHref(d.email); copyMail.dataset.copy=d.email;}
    else rowMail.style.display='none';
    if(d.url){webLink.textContent=d.url; webLink.href=urlNorm(d.url); copyWeb.dataset.copy=d.url;}
    else rowWeb.style.display='none';
  }

  document.querySelectorAll('.copy-btn').forEach(btn=>{
    const orig=btn.innerHTML;
    btn.addEventListener('click',async()=>{
      try{await navigator.clipboard.writeText(btn.dataset.copy||'');
        btn.textContent='✓'; setTimeout(()=>btn.innerHTML=orig,900);
      }catch{alert('Kopyalanamadı');}
    });
  });
})();
</script>
</body>
</html>
