<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Burak Yılmaz | Dijital Kart</title>
<meta name="theme-color" content="#0b0f10">
<style>
  :root{
    --bg:#0b0f10; --panel:#0f1418; --text:#e9eef2; --muted:#b7c2ca;
    --radius:20px; --shadow:0 20px 60px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
    display:grid; place-items:start center;
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 16px);
  }

  /* ===== ÜST KART ===== */
  .card{
    width:min(720px,92vw);
    margin:0 auto;
    background:#0b1014; border-radius:var(--radius);
    overflow:hidden; box-shadow:var(--shadow);
    position:sticky; top:0; z-index:5;   /* alt panel bundan daha yüksek */
  }
  .cover{
    height:clamp(140px, 32vw, 180px);
    background:#111 url("banner.jpg") center/cover no-repeat;
    position:relative;
  }
  .avatar{
    position:absolute; left:50%; bottom:-56px; transform:translateX(-50%);
    width:112px; height:112px; border-radius:50%;
    background:#fff url("brkylmz.jpg") center/cover no-repeat;
    /* beyaz çerçeve + karanlık dış çizgi */
    box-shadow:0 0 0 4px #ffffff, 0 8px 24px rgba(0,0,0,.45);
    outline:6px solid #0f1418; cursor:zoom-in;
  }
  .inner{ background:var(--panel); padding:72px 22px 22px; text-align:center }
  .name{ margin:0 0 6px; font-weight:800; font-size:clamp(22px,5vw,28px) }
  .company{ color:var(--muted); font-size:14px }
  .title{ color:var(--muted); font-size:13px; margin-top:4px }

  .actions{
    display:grid; grid-template-columns:repeat(4,minmax(0,1fr));
    gap:12px; margin-top:22px;
  }
  .btn{
    display:flex; flex-direction:column; align-items:center; gap:8px;
    background:#11171c; border:1px solid rgba(255,255,255,.06);
    border-radius:14px; padding:14px 10px; color:var(--text); text-decoration:none;
  }
  .btn svg{ width:20px; height:20px; opacity:.9 }
  .btn span{ font-size:12px; color:#d2dde6 }
  .btn:active{ transform:translateY(1px) }
  .btn.save{ background:#0f6d5d; border-color:rgba(255,255,255,.08) }
  .btn.save span{ color:#e9f7f3 }

  /* ===== MODAL ===== */
  .modal{ position:fixed; inset:0; display:none; place-items:center; z-index:50 }
  .modal.open{ display:grid }
  .modal .overlay{ position:absolute; inset:0; background:rgba(0,0,0,.65) }
  .modal .box{ position:relative; z-index:1; background:#0f1418; padding:10px; border-radius:16px }
  .modal img{ display:block; max-width:min(92vw, 320px); height:auto; border-radius:16px }
  .modal .close{
    position:absolute; top:-10px; right:-10px; width:36px; height:36px; border-radius:50%;
    border:0; cursor:pointer; background:#fff; color:#000; font-weight:700;
  }

  /* ===== ALT İLETİŞİM PANELİ (cp- prefix) ===== */
  .cp-panel{
    width:min(720px,92vw);
    margin:60px auto 60px;
    background:#11171c; border:1px solid rgba(255,255,255,.06);
    border-radius:16px; box-shadow:0 14px 40px rgba(0,0,0,.35);
    position:relative; z-index:20;          /* << Üst kartın üstünde */
    transform: translateZ(0);               /* << iOS Safari stacking fix */
  }
  .cp-grip{ display:flex; justify-content:center; padding:8px 0 4px }
  .cp-grip span{ width:58px; height:4px; border-radius:999px; background:rgba(255,255,255,.18) }

  .cp-list{ list-style:none; margin:8px; padding:0 }
  .cp-row{
    display:flex; align-items:center; justify-content:space-between;
    gap:10px; padding:12px; margin:8px 4px; border-radius:12px;
    background:#0f1418; border:1px solid rgba(255,255,255,.05);
  }
  .cp-left{ display:flex; align-items:center; gap:10px; min-width:0 }
  .cp-left svg{ width:18px; height:18px; opacity:.9; flex:0 0 auto }
  .cp-text{ color:#e9eef2; text-decoration:none; word-break:break-word }
  .cp-copy{
    display:inline-flex; align-items:center; justify-content:center;
    width:34px; height:34px; border-radius:10px; cursor:pointer;
    background:#0b1014; border:1px solid rgba(255,255,255,.12); color:#e9eef2;
  }
  .cp-copy:active{ transform:translateY(1px) }
  .cp-copy svg{ width:16px; height:16px }

  /* ===== Mobil ayarlar ===== */
  @media (max-width: 420px){
    .cover{ height: 140px }
    .avatar{ width:96px; height:96px; bottom:-48px }
    .inner{ padding:64px 16px 16px }
    .actions{ gap:10px }
    .btn{ padding:12px 8px }
    /* Dilersen sticky'i tamamen kapatabilirsiniz:
       .card{ position:relative; top:auto }
    */
  }
</style>
</head>
<body>

<!-- ===== ÜST KART ===== -->
<section class="card" aria-label="Dijital Kart">
  <div class="cover">
    <div class="avatar" id="avatar" aria-label="Avatar"></div>
  </div>

  <div class="inner">
    <h1 class="name">Burak Yılmaz</h1>
    <div class="company">Osmanlı Menkul Değerler A.Ş.</div>
    <div class="title">System Administrator</div>

    <nav class="actions" aria-label="Hızlı İşlemler">
      <a class="btn" href="tel:+905524915334" aria-label="Ara">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24 11.36 11.36 0 003.56.57 1 1 0 011 1V20a1 1 0 01-1 1A17 17 0 013 5a1 1 0 011-1h3.5a1 1 0 011 1 11.36 11.36 0 00.57 3.56 1 1 0 01-.24 1.01l-2.2 2.2z"/></svg>
        <span>Call</span>
      </a>

      <a class="btn" href="mailto:buraky@osmanlimenkul.com.tr" aria-label="E-posta">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm-1.4 3L12 11.25 5.4 7h13.2z"/></svg>
        <span>E-mail</span>
      </a>

      <a class="btn" id="qrBtn" href="#" aria-label="QR Göster">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h8v8H3V3zm2 2v4h4V5H5zm6-2h8v8h-8V3zm2 2v4h4V5h-4zM3 13h8v8H3v-8zm2 2v4h4v-4H5zm10 0h2v2h-2v-2zm-2 4h2v2h-2v-2zm4 0h4v4h-4v-4zm0-4h4v2h-4v-2z"/></svg>
        <span>QR</span>
      </a>

      <a class="btn save"
         href="https://raw.githubusercontent.com/burakyilmaz3453/brkylmz/main/BurakYilmazvCard.vcf"
         type="text/vcard" aria-label="Rehbere ekle">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 12a4 4 0 100-8 4 4 0 000 8zm-6 8a6 6 0 1112 0H6z"/>
          <path d="M19 8h-2V6h-2V4h2V2h2v2h2v2h-2v2z"/>
        </svg>
        <span>Save</span>
      </a>
    </nav>
  </div>
</section>

<!-- ===== ALT İLETİŞİM PANELİ ===== -->
<section class="cp-panel" aria-label="İletişim">
  <div class="cp-grip"><span></span></div>
  <ul class="cp-list">
    <li class="cp-row" id="cpCellRow">
      <div class="cp-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17 2H7a2 2 0 00-2 2v16a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2zm-5 19a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"/></svg>
        <a id="cpCell" class="cp-text" href="#">—</a>
      </div>
      <button class="cp-copy" id="cpCopyCell" aria-label="Kopyala">⧉</button>
    </li>

    <li class="cp-row" id="cpWorkRow">
      <div class="cp-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24 11.36 11.36 0 003.56.57 1 1 0 011 1V20a1 1 0 01-1 1A17 17 0 013 5a1 1 0 011-1h3.5a1 1 0 011 1 11.36 11.36 0 00.57 3.56 1 1 0 01-.24 1.01l-2.2 2.2z"/></svg>
        <a id="cpWork" class="cp-text" href="#">—</a>
      </div>
      <button class="cp-copy" id="cpCopyWork" aria-label="Kopyala">⧉</button>
    </li>

    <li class="cp-row" id="cpMailRow">
      <div class="cp-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm-1.4 3L12 11.25 5.4 7h13.2z"/></svg>
        <a id="cpMail" class="cp-text" href="#">—</a>
      </div>
      <button class="cp-copy" id="cpCopyMail" aria-label="Kopyala">⧉</button>
    </li>

    <li class="cp-row" id="cpWebRow">
      <div class="cp-left">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 5h5v2h-3v8h-2V7zM7 9h4v2H9v6H7V9z"/></svg>
        <a id="cpWeb" class="cp-text" href="#" target="_blank" rel="noopener">—</a>
      </div>
      <button class="cp-copy" id="cpCopyWeb" aria-label="Kopyala">⧉</button>
    </li>
  </ul>
</section>

<!-- Avatar Modal -->
<div class="modal" id="avModal" aria-hidden="true">
  <div class="overlay"></div>
  <div class="box">
    <button class="close" aria-label="Kapat">×</button>
    <img id="avBig" alt="Avatar">
  </div>
</div>

<!-- QR Modal -->
<div class="modal" id="qrModal" aria-hidden="true">
  <div class="overlay"></div>
  <div class="box">
    <button class="close" aria-label="Kapat">×</button>
    <img src="./qr.svg" alt="QR Kod">
  </div>
</div>

<script>
/* ===== Avatar modal ===== */
const av=document.getElementById('avatar');
const avModal=document.getElementById('avModal');
const avBig=document.getElementById('avBig');
const bg=getComputedStyle(av).backgroundImage;
const src=bg.slice(bg.indexOf('"')+1,bg.lastIndexOf('"'));
avBig.src=src;
av.addEventListener('click',()=>avModal.classList.add('open'));
avModal.querySelector('.overlay').addEventListener('click',()=>avModal.classList.remove('open'));
avModal.querySelector('.close').addEventListener('click',()=>avModal.classList.remove('open'));
window.addEventListener('keydown',e=> (e.key==='Escape') && avModal.classList.remove('open'));

/* ===== QR modal ===== */
const qrBtn=document.getElementById('qrBtn');
const qrModal=document.getElementById('qrModal');
qrBtn.addEventListener('click',e=>{ e.preventDefault(); qrModal.classList.add('open'); });
qrModal.querySelector('.overlay').addEventListener('click',()=> qrModal.classList.remove('open'));
qrModal.querySelector('.close').addEventListener('click',()=> qrModal.classList.remove('open'));
window.addEventListener('keydown',e=> (e.key==='Escape') && qrModal.classList.remove('open'));

/* ===== VCF'den bilgileri doldur ===== */
(function(){
  const saveLink=document.querySelector('.btn.save');
  const href=saveLink ? saveLink.getAttribute('href') : '';
  const candidates = [
    href,
    './BurakYilmazvCard.vcf',
    'https://raw.githubusercontent.com/burakyilmaz3453/brkylmz/main/BurakYilmazvCard.vcf',
    'https://burakyilmaz3453.github.io/brkylmz/BurakYilmazvCard.vcf'
  ].filter(Boolean);

  const unfold = s => s.replace(/\r?\n[ \t]/g,'');
  const parse = ln => {
    const m = ln.match(/^([A-Z]+)(;[^:]+)?:([\s\S]*)$/i);
    return m ? {key:m[1].toUpperCase(), params:(m[2]||'').toLowerCase(), val:m[3].trim()} : null;
  };
  const hasType = (p, t) => new RegExp(`(?:^|;|,)type=[^:]*\\b${t}\\b`,'i').test(p);
  const telHref  = v => 'tel:'    + (v||'').replace(/[^+\d]/g,'');
  const mailHref = v => 'mailto:' + (v||'');
  const urlNorm  = v => (v||'').startsWith('http') ? v : ('https://' + (v||''));

  async function loadVCF(){
    for (const url of candidates){
      try{
        const res = await fetch(url, { cache:'no-store' });
        if(res.ok){ fill(await res.text()); return; }
      }catch(e){}
    }
    console.warn('VCF bulunamadı/okunamadı.');
  }

  function fill(raw){
    const lines = unfold(raw).split(/\r?\n/).map(parse).filter(Boolean);
    const d = {cell:null, work:null, email:null, url:null};

    for(const it of lines){
      if(it.key==='TEL'){
        if(hasType(it.params,'cell') || hasType(it.params,'mobile')) d.cell ??= it.val;
        else if(hasType(it.params,'work')) d.work ??= it.val;
        else if(!d.cell) d.cell = it.val;
      }
      if(it.key==='EMAIL'){
        if(hasType(it.params,'work')) d.email ??= it.val;
        else if(!d.email) d.email = it.val;
      }
      if(it.key==='URL'){ d.url ??= it.val; }
    }

    const cellRow=document.getElementById('cpCellRow');
    if(d.cell){
      const a=document.getElementById('cpCell');
      a.textContent=d.cell; a.href=telHref(d.cell);
      document.getElementById('cpCopyCell').dataset.copy=d.cell;
    } else { cellRow.style.display='none'; }

    const workRow=document.getElementById('cpWorkRow');
    if(d.work){
      const a=document.getElementById('cpWork');
      a.textContent=d.work; a.href=telHref(d.work);
      document.getElementById('cpCopyWork').dataset.copy=d.work;
    } else { workRow.style.display='none'; }

    const mailRow=document.getElementById('cpMailRow');
    if(d.email){
      const a=document.getElementById('cpMail');
      a.textContent=d.email; a.href=mailHref(d.email);
      document.getElementById('cpCopyMail').dataset.copy=d.email;
    } else { mailRow.style.display='none'; }

    const webRow=document.getElementById('cpWebRow');
    if(d.url){
      const a=document.getElementById('cpWeb');
      a.textContent=d.url; a.href=urlNorm(d.url);
      document.getElementById('cpCopyWeb').dataset.copy=d.url;
    } else { webRow.style.display='none'; }
  }

  document.querySelectorAll('.cp-copy').forEach(btn=>{
    const orig=btn.innerHTML;
    btn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(btn.dataset.copy || '');
        btn.textContent='✓'; setTimeout(()=>btn.innerHTML=orig,900);
      }catch{ alert('Kopyalanamadı'); }
    });
  });

  loadVCF();
})();
</script>
</body>
</html>

